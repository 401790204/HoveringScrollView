<div class='file_content markdown-body'>
<h2><a class="anchor" id="&lt;a-href=-https-git-oschina-net-steve-hoveringscroll-git-title=-滑动到顶部悬浮功能条-&gt;滑动到顶部悬浮功能条&lt;-a&gt;" href="#&lt;a-href=-https-git-oschina-net-steve-hoveringscroll-git-title=-滑动到顶部悬浮功能条-&gt;滑动到顶部悬浮功能条&lt;-a&gt;"></a><a href="https://git.oschina.net/steve/HoveringScroll.git" title="滑动到顶部悬浮功能条">滑动到顶部悬浮功能条</a></h2>&#x000A;<p><strong>上滑停靠顶端悬浮框,下滑恢复原有位置</strong></p>&#x000A;&#x000A;<p>滑动时，监听<code>ScrollView</code>的滚动Y值和悬浮区域以上的高度进行比较计算，对两个控件(布局)的显示隐藏来实现控件的顶部悬浮，通过<code>addView</code>和<code>removeView</code>来实现。</p>&#x000A;<h3><a class="anchor" id="具体实现步骤-" href="#具体实现步骤-"></a>具体实现步骤：</h3>&#x000A;<p><strong>1.让<code>ScrollView</code>实现滚动监听</strong></p>&#x000A;&#x000A;<p>具体参见<code>HoveringScrollview</code></p>&#x000A;&#x000A;<p><strong>2.布局实现</strong></p>&#x000A;<div class="white"><div class="highlight"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>&#x000A;<span class="nt">&lt;RelativeLayout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>&#x000A;    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>&#x000A;    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>&#x000A;    <span class="na">android:orientation=</span><span class="s">"vertical"</span>&#x000A;    <span class="na">android:paddingBottom=</span><span class="s">"@dimen/activity_vertical_margin"</span> <span class="nt">&gt;</span>&#x000A;&#x000A;<span class="c">&lt;!-- zing定义view： HoveringScrollview --&gt;</span>&#x000A;<span class="nt">&lt;com.steve.hovering.samples.HoveringScrollview</span>&#x000A;    <span class="na">android:id=</span><span class="s">"@+id/hoveringScrollview"</span>&#x000A;    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>&#x000A;    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span> <span class="nt">&gt;</span>&#x000A;&#x000A;    <span class="nt">&lt;LinearLayout</span>&#x000A;        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>&#x000A;        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>&#x000A;        <span class="na">android:orientation=</span><span class="s">"vertical"</span> <span class="nt">&gt;</span>&#x000A;&#x000A;        <span class="nt">&lt;RelativeLayout</span>&#x000A;            <span class="na">android:id=</span><span class="s">"@+id/rlayout"</span>&#x000A;            <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>&#x000A;            <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>&#x000A;            <span class="na">android:layout_gravity=</span><span class="s">"center_horizontal"</span> <span class="nt">&gt;</span>&#x000A;&#x000A;            <span class="nt">&lt;TextView</span>&#x000A;                <span class="na">android:id=</span><span class="s">"@+id/tv"</span>&#x000A;                <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>&#x000A;                <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>&#x000A;                <span class="na">android:gravity=</span><span class="s">"center_vertical"</span>&#x000A;                <span class="na">android:text=</span><span class="s">"TOP信息\nTOP信息\nTOP信息\nTOP信息"</span>&#x000A;                <span class="na">android:textColor=</span><span class="s">"#d19275"</span>&#x000A;                <span class="na">android:textSize=</span><span class="s">"30sp"</span> <span class="nt">/&gt;</span>&#x000A;        <span class="nt">&lt;/RelativeLayout&gt;</span>&#x000A;&#x000A;        <span class="c">&lt;!-- 这个悬浮条必须是固定高度:如70dp --&gt;</span>&#x000A;        <span class="nt">&lt;LinearLayout</span>&#x000A;            <span class="na">android:id=</span><span class="s">"@+id/search02"</span>&#x000A;            <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>&#x000A;            <span class="na">android:layout_height=</span><span class="s">"70dp"</span> <span class="nt">&gt;</span>&#x000A;&#x000A;            <span class="nt">&lt;LinearLayout</span>&#x000A;                <span class="na">android:id=</span><span class="s">"@+id/hoveringLayout"</span>&#x000A;                <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>&#x000A;                <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>&#x000A;                <span class="na">android:background=</span><span class="s">"#A8A8A8"</span>&#x000A;                <span class="na">android:gravity=</span><span class="s">"center_vertical"</span>&#x000A;                <span class="na">android:orientation=</span><span class="s">"horizontal"</span>&#x000A;                <span class="na">android:padding=</span><span class="s">"10dp"</span> <span class="nt">&gt;</span>&#x000A;&#x000A;                <span class="nt">&lt;TextView</span>&#x000A;                    <span class="na">android:layout_width=</span><span class="s">"0dp"</span>&#x000A;                    <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>&#x000A;                    <span class="na">android:layout_weight=</span><span class="s">"1"</span>&#x000A;                    <span class="na">android:gravity=</span><span class="s">"center"</span>&#x000A;                    <span class="na">android:padding=</span><span class="s">"10dp"</span>&#x000A;                    <span class="na">android:text=</span><span class="s">"￥188\r\n原价：￥399"</span>&#x000A;                    <span class="na">android:textColor=</span><span class="s">"#FF7F00"</span> <span class="nt">/&gt;</span>&#x000A;&#x000A;                <span class="nt">&lt;Button</span>&#x000A;                    <span class="na">android:id=</span><span class="s">"@+id/btnQiaBuy"</span>&#x000A;                    <span class="na">android:layout_width=</span><span class="s">"0dp"</span>&#x000A;                    <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>&#x000A;                    <span class="na">android:layout_weight=</span><span class="s">"1"</span>&#x000A;                    <span class="na">android:background=</span><span class="s">"#FF7F00"</span>&#x000A;                    <span class="na">android:padding=</span><span class="s">"10dp"</span>&#x000A;                    <span class="na">android:onClick=</span><span class="s">"clickListenerMe"</span>&#x000A;                    <span class="na">android:text=</span><span class="s">"立即抢购"</span>&#x000A;                    <span class="na">android:textColor=</span><span class="s">"#FFFFFF"</span> <span class="nt">/&gt;</span>&#x000A;            <span class="nt">&lt;/LinearLayout&gt;</span>&#x000A;        <span class="nt">&lt;/LinearLayout&gt;</span>&#x000A;&#x000A;        <span class="nt">&lt;TextView</span>&#x000A;            <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>&#x000A;            <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>&#x000A;            <span class="na">android:gravity=</span><span class="s">"center_horizontal"</span>&#x000A;            <span class="na">android:text=</span><span class="s">"1测试内容\n2测试内容\n3测试内容\n4测试内容\n5测试内容\n6测试内容\n7测试内容\n8测试内容\n9测试内容\n10测试内容\n11测试内容\n12测试内容\n13测试内容\n14测试内容\n15测试内容\n16测试内容\n测试内容\n测试内容\n测试内容\n测试内容\n测试内容\n测试内容\n测试内容\n测试内容\n25测试内容"</span>&#x000A;            <span class="na">android:textSize=</span><span class="s">"40sp"</span> <span class="nt">/&gt;</span>&#x000A;    <span class="nt">&lt;/LinearLayout&gt;</span>&#x000A;<span class="nt">&lt;/com.steve.hovering.samples.HoveringScrollview&gt;</span>&#x000A;&#x000A;<span class="nt">&lt;LinearLayout</span>&#x000A;    <span class="na">android:id=</span><span class="s">"@+id/search01"</span>&#x000A;    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>&#x000A;    <span class="na">android:layout_height=</span><span class="s">"70dp"</span>&#x000A;    <span class="na">android:orientation=</span><span class="s">"vertical"</span> <span class="nt">&gt;</span>&#x000A;<span class="nt">&lt;/LinearLayout&gt;</span>&#x000A;&#x000A;<span class="nt">&lt;/RelativeLayout&gt;</span>&#x000A;</pre></div></div>&#x000A;<p><strong>3.监听变化，实现悬停效果</strong></p>&#x000A;&#x000A;<p>通过search01和search02的<code>addView</code>和<code>removeView</code>来实现</p>&#x000A;<h3><a class="anchor" id="效果展示" href="#效果展示"></a>效果展示</h3>&#x000A;<p><img alt="上滑停靠顶端悬浮框效果展示" src="http://git.oschina.net/uploads/images/2015/0703/172855_d2daf32f_9145.gif" title="上滑停靠顶端悬浮框效果展示" /></p>&#x000A;&#x000A;<hr>&#x000A;<h3><a class="anchor" id="&lt;a-href=-https-git-oschina-net-steve-hoveringscroll-issues-&gt;交流区-点击-提交建议-问题等&lt;-a&gt;" href="#&lt;a-href=-https-git-oschina-net-steve-hoveringscroll-issues-&gt;交流区-点击-提交建议-问题等&lt;-a&gt;"></a></h3></div>
</div>
</div>
